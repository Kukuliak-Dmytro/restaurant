# RLS (Row Level Security) Setup Instructions

## Проблема
Локації захищені RLS політиками в Supabase, що блокує доступ для звичайних користувачів.

## Рішення

### Крок 1: Відкрийте Supabase Dashboard
1. Перейдіть на https://supabase.com/dashboard
2. Виберіть ваш проект
3. Перейдіть до розділу "SQL Editor"

### Крок 2: Виконайте SQL скрипти

#### Варіант A: Повні політики (рекомендовано)
Виконайте файл `supabase_rls_policies.sql` - він містить повний набір політик з адміністративними правами.

#### Варіант B: Прості політики
Виконайте файл `simple_rls_policies.sql` - він містить базові політики для доступу до даних.

### Крок 3: Перевірка політик

Після виконання скриптів перевірте:

1. **restaurant_locations** - користувачі можуть читати всі локації
2. **employees** - користувачі можуть читати/редагувати тільки свій профіль
3. **role** - всі користувачі можуть читати ролі
4. **employees_schedule** - користувачі бачать розклади тільки своєї локації
5. **shifts** - всі користувачі можуть читати зміни

### Крок 4: Тестування

1. Оновіть сторінку в браузері
2. Перевірте дебаг панель - тепер має показувати локації
3. Перевірте консоль браузера на наявність помилок

## Додаткові налаштування

### Якщо потрібні адміністративні права:
- Додайте користувача з `role_id = 7` (Admin)
- Адміністратори зможуть управляти всіма даними

### Якщо потрібно обмежити доступ:
- Змініть політики в SQL Editor
- Додайте додаткові умови до `USING` клаузул

## Troubleshooting

### Помилка "permission denied"
- Перевірте чи увійшли в систему
- Перевірте чи правильно налаштовані політики

### Локації не завантажуються
- Перевірте чи виконаний скрипт `simple_rls_policies.sql`
- Перевірте чи включений RLS на таблиці `restaurant_locations`

### Користувач не може редагувати профіль
- Перевірте політику `users_update_own_employee`
- Переконайтеся що email в JWT токені співпадає з email в базі даних
